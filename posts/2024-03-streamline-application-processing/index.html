<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How AWS Step Functions helped streamline the DVLA's application process | DVLA Engineering</title><meta name=keywords content="AWS,AWS Step Functions"><meta name=description content="Introduction Harnessing the power of AWS Step Functions, the Driver and Vehicle Licensing Agency (DVLA) embarks on a transformative journey to streamline its operations. With over 50 million registered drivers and 40 million vehicles, the DVLA navigates various applications, from driving licences to vehicle registrations. This blog unveils the approach adopted by DVLA to transform its application process, ensuring flexibility and customisation for each application type.
Background As the custodian of millions of driver and vehicle records, DVLA grapples with the complexity of managing diverse applications."><meta name=author content="Gareth Griffiths"><link rel=canonical href=https://dvla.github.io/posts/2024-03-streamline-application-processing/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://dvla.github.io/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://dvla.github.io/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://dvla.github.io/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://dvla.github.io/favicon/apple-touch-icon.png><link rel=mask-icon href=https://dvla.github.io/favicon/favicon-16x16.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-WH4N9FEEE8"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WH4N9FEEE8",{anonymize_ip:!1})}</script><meta property="og:title" content="How AWS Step Functions helped streamline the DVLA's application process"><meta property="og:description" content="Introduction Harnessing the power of AWS Step Functions, the Driver and Vehicle Licensing Agency (DVLA) embarks on a transformative journey to streamline its operations. With over 50 million registered drivers and 40 million vehicles, the DVLA navigates various applications, from driving licences to vehicle registrations. This blog unveils the approach adopted by DVLA to transform its application process, ensuring flexibility and customisation for each application type.
Background As the custodian of millions of driver and vehicle records, DVLA grapples with the complexity of managing diverse applications."><meta property="og:type" content="article"><meta property="og:url" content="https://dvla.github.io/posts/2024-03-streamline-application-processing/"><meta property="og:image" content="https://dvla.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-18T00:00:00+00:00"><meta property="article:modified_time" content="2024-03-18T00:00:00+00:00"><meta property="og:site_name" content="DVLA Engineering"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dvla.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="How AWS Step Functions helped streamline the DVLA's application process"><meta name=twitter:description content="Introduction Harnessing the power of AWS Step Functions, the Driver and Vehicle Licensing Agency (DVLA) embarks on a transformative journey to streamline its operations. With over 50 million registered drivers and 40 million vehicles, the DVLA navigates various applications, from driving licences to vehicle registrations. This blog unveils the approach adopted by DVLA to transform its application process, ensuring flexibility and customisation for each application type.
Background As the custodian of millions of driver and vehicle records, DVLA grapples with the complexity of managing diverse applications."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://dvla.github.io/posts/"},{"@type":"ListItem","position":2,"name":"How AWS Step Functions helped streamline the DVLA's application process","item":"https://dvla.github.io/posts/2024-03-streamline-application-processing/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How AWS Step Functions helped streamline the DVLA's application process","name":"How AWS Step Functions helped streamline the DVLA\u0027s application process","description":"Introduction Harnessing the power of AWS Step Functions, the Driver and Vehicle Licensing Agency (DVLA) embarks on a transformative journey to streamline its operations. With over 50 million registered drivers and 40 million vehicles, the DVLA navigates various applications, from driving licences to vehicle registrations. This blog unveils the approach adopted by DVLA to transform its application process, ensuring flexibility and customisation for each application type.\nBackground As the custodian of millions of driver and vehicle records, DVLA grapples with the complexity of managing diverse applications.","keywords":["AWS","AWS Step Functions"],"articleBody":"Introduction Harnessing the power of AWS Step Functions, the Driver and Vehicle Licensing Agency (DVLA) embarks on a transformative journey to streamline its operations. With over 50 million registered drivers and 40 million vehicles, the DVLA navigates various applications, from driving licences to vehicle registrations. This blog unveils the approach adopted by DVLA to transform its application process, ensuring flexibility and customisation for each application type.\nBackground As the custodian of millions of driver and vehicle records, DVLA grapples with the complexity of managing diverse applications. From initial licence acquisition to periodic photo licence renewals and vehicle-related transactions, the spectrum of services demands a cohesive yet adaptable framework.\nChallenge DVLA‚Äôs organisational structure traditionally compartmentalises teams into the driver or vehicle-focused domains. Integrating disparate knowledge bases becomes an arduous task, compounded by the intricate regulations governing both drivers and vehicles.\nSolution approach DVLA carried out the analysis of its application landscape, identifying common phases traversed by all applications. This critical insight formed the foundation for crafting a unified application workflow, capable of seamlessly orchestrating diverse applications through their respective journeys.\nTechnology choice Building upon existing expertise with AWS infrastructure, DVLA leveraged AWS Step Functions to architect its solution. The decision was reinforced by the robustness and adaptability offered by AWS Step Functions, aligning seamlessly with DVLA‚Äôs cloud-native strategy.\nIntroducing the application process engine aka APE This is where the application process engine was born, a dynamic workflow engine designed to navigate applications through various stages. APE embodies versatility, executing generic business functionalities common to most applications.\nApplication process engine\nThe aforementioned diagram offers a birdseye view of the orchestration of the application across its diverse phases. The workflows dedicated to driver applications are compartmentalised and self-contained, executing only the driving licence application-specific steps essential for completing each phase.\nWorkflow within a workflow üòï? In our approach to handling the workflow for driving licences and vehicle-related logic, we opted to define sub-workflows for each application phase. For instance, in the scenario where licence holders are mandated to renew their photo on their driving licence, they now have the option to upload a photo of their choice, presenting a unique ‚Äúselfie opportunity.‚Äù Should they choose this route, a designated clerk within the DVLA is tasked with conducting meticulous checks on the submitted image to ensure compliance with standards.\nHowever, the preparatory steps involved in photo submission and the subsequent review by a clerk hold no relevance in the context of vehicle applications or instances where individuals seek to update their address information on their driving licence or vehicle - wherein no photo submission is required.\n10,000m view of the integrated driver application workflows\nHarnessing AWS Step Functions direct integrations Within the extensive repertoire of direct integrations offered by AWS Step Functions, lies a notable inclusion: AWS Step Functions themselves (yes, start a workflow within a workflow). Leveraging this optimized integration, we seamlessly triggered sub-workflows tailored to the specific phases of driver or vehicle applications directly from our application process engine. This innovative approach draws inspiration from the ServerlessLand website, underscoring our commitment to efficiency and best practices in workflow architecture.\nAWS simplifies the process of defining steps necessary to trigger sub-workflows. We leverage the Serverless Framework for deploying our applications onto AWS which further enhances this seamless integration. Below is an example of how a sub-workflow is triggered:\nCheckReceptionHook: Type: Choice Choices: - Variable: $.hooks.receptionStateMachine \"IsPresent\": true Next: ReceptionHook Default: SettlePayment ReceptionHook: Type: Task Resource: arn:aws:states:::states:startExecution.sync:2 Parameters: StateMachineArn.$: $.hooks.receptionStateMachine.arn Input: applicationId.$: $.applicationId iteration.$: $.iteration AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$: $$.Execution.Id Name.$: States.Format('{}-{}-{}', $.hooks.receptionStateMachine.name, $.applicationId, $.iteration) Retry: # Some retry definitions ResultPath: null Next: SettlePayment Before delving into the defined steps outlined above, it‚Äôs crucial to discuss certain preparatory steps. At the outset of processing, the application process engine initiates a pivotal step. Here, logic is deployed to ascertain the application type, delineate the required sub-workflows, and furnish the necessary Amazon Resource Names (ARNs) for their execution.\nWithin our framework, we employ the term Hooks to denote instances where the application process engine (APE) workflow triggers a sub-workflow. Pertinent hook details are then propagated through the state input and onto the relevant steps.\nWhile each phase of the application possesses the potential to trigger a sub-workflow, not all applications necessitate every phase. Hence, a preliminary step precedes the hook triggering, deciding whether the state contains details corresponding to the specific phase of the application. As evidenced in the above definition, a step named CheckReceptionHook exemplifies this verification process.\nThis orchestration empowers the sub-workflows to seamlessly adapt to the idiosyncratic demands of each application type, while concurrently maintaining the application process engine‚Äôs versatility and generic behaviour.\nAdvantages of this approach Addressing the challenge One of the primary hurdles we encounter revolves around the domain expertise of our teams, particularly concerning drivers or vehicles. This approach empowers driver and vehicle teams to craft their specialised sub-workflows tailored to their applications. These teams seamlessly integrate these sub-workflows into the application process engine, thereby effectively fulfilling the application.\nStreamlined testing Testing becomes notably simplified with this approach, as clear boundaries are delineated for testing purposes. The application process engine operates as an independent deployment, facilitating comprehensive testing within a controlled environment. Furthermore, the project can undergo testing in isolation. Simple stubs can be readily implemented for the sub-workflows, facilitating smooth progression through various phases. Each individual sub-workflow operates as a self-contained entity, enabling isolated triggering and testing.\nEfficient utilisation of common functionality Every application inherits the shared functionalities embedded within the application process engine, obviating the need for duplicated steps. This streamlined approach empowers teams to focus their efforts on refining their unique business logic and workflow, thereby enhancing overall efficiency and productivity.\nNavigating challenges in implementation Designing a robust generic application process engine Despite our analysis of each application type within the DVLA, designing a comprehensive application process engine presents formidable challenges. Anticipating the impact of our design decisions across diverse application types proves inherently complex. To mitigate this challenge, communication and collaboration are paramount. Ensuring that all relevant stakeholders are engaged and have oversight of the changes helps minimise the risk of unintended consequences.\nDeploying to an Active Production Environment Deploying application workflows to a live production environment introduces another layer of complexity. As these workflows actively process applications, any alterations to the underlying sub-workflow state must be executed with utmost caution. Deploying changes while applications are in progress runs the risk of inconsistencies or disruptions in workflow execution. Hence, we attempt to incorporate robust backward compatibility and versioning mechanisms to navigate the evolving landscape effectively.\nEnd-to-end testing dilemmas While the benefits of testing in isolation are undeniable, they also introduce challenges, particularly in the realm of integration testing. Integrating isolated components developed by different teams necessitates rigorous integration testing to ensure seamless interoperability. Effective communication becomes paramount, especially when teams may naturally prioritise their component‚Äôs delivery over integration testing. At DVLA, we mitigate this challenge by dedicating a specialised team solely focused on integration testing, ensuring comprehensive validation in a fully integrated environment with an independent view and approach.\nConclusion In summary, the DVLA‚Äôs adoption of AWS Step Functions and the development of the application process engine, represent significant strides towards modernising its application processing. We are thrilled to announce that we have successfully gone live with the ten-year licence renewal process, marking a significant milestone in our digital transformation journey.\nTime will tell whether the design decisions result in an overall improvement in migrating and delivering applications onto the new platform.\n","wordCount":"1243","inLanguage":"en","datePublished":"2024-03-18T00:00:00Z","dateModified":"2024-03-18T00:00:00Z","author":{"@type":"Person","name":"Gareth Griffiths"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dvla.github.io/posts/2024-03-streamline-application-processing/"},"publisher":{"@type":"Organization","name":"DVLA Engineering","logo":{"@type":"ImageObject","url":"https://dvla.github.io/favicon/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://dvla.github.io/ accesskey=h title="DVLA Engineering (Alt + H)"><img src=https://dvla.github.io/favicon/apple-touch-icon.png alt aria-label=logo height=49>DVLA Engineering</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://dvla.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://dvla.github.io/open-source/ title=Open-source><span>Open-source</span></a></li><li><a href=https://github.com/dvla/ title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.civil-service-careers.gov.uk/departments/working-for-the-driver-and-vehicle-licensing-agency/ title=Careers><span>Careers</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://dvla.github.io/>Home</a>&nbsp;¬ª&nbsp;<a href=https://dvla.github.io/posts/>Posts</a></div><h1 class=post-title>How AWS Step Functions helped streamline the DVLA's application process</h1><div class=post-meta><span title='2024-03-18 00:00:00 +0000 UTC'>March 18, 2024</span>&nbsp;¬∑&nbsp;6 min&nbsp;¬∑&nbsp;1243 words&nbsp;¬∑&nbsp;Gareth Griffiths</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#background>Background</a></li><li><a href=#challenge>Challenge</a></li><li><a href=#solution-approach>Solution approach</a></li><li><a href=#technology-choice>Technology choice</a></li><li><a href=#introducing-the-application-process-engine-aka-ape>Introducing the application process engine aka APE</a></li><li><a href=#workflow-within-a-workflow->Workflow within a workflow üòï?</a></li><li><a href=#harnessing-aws-step-functions-direct-integrations>Harnessing AWS Step Functions direct integrations</a><ul><li><a href=#advantages-of-this-approach>Advantages of this approach</a></li><li><a href=#navigating-challenges-in-implementation>Navigating challenges in implementation</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>Harnessing the power of AWS Step Functions, the Driver and Vehicle Licensing Agency (DVLA) embarks on a transformative journey to streamline its operations. With over 50 million registered drivers and 40 million vehicles, the DVLA navigates various applications, from driving licences to vehicle registrations. This blog unveils the approach adopted by DVLA to transform its application process, ensuring flexibility and customisation for each application type.</p><h2 id=background>Background<a hidden class=anchor aria-hidden=true href=#background>#</a></h2><p>As the custodian of millions of driver and vehicle records, DVLA grapples with the complexity of managing diverse applications. From initial licence acquisition to periodic photo licence renewals and vehicle-related transactions, the spectrum of services demands a cohesive yet adaptable framework.</p><h2 id=challenge>Challenge<a hidden class=anchor aria-hidden=true href=#challenge>#</a></h2><p>DVLA‚Äôs organisational structure traditionally compartmentalises teams into the driver or vehicle-focused domains. Integrating disparate knowledge bases becomes an arduous task, compounded by the intricate regulations governing both drivers and vehicles.</p><h2 id=solution-approach>Solution approach<a hidden class=anchor aria-hidden=true href=#solution-approach>#</a></h2><p>DVLA carried out the analysis of its application landscape, identifying common phases traversed by all applications. This critical insight formed the foundation for crafting a unified application workflow, capable of seamlessly orchestrating diverse applications through their respective journeys.</p><h2 id=technology-choice>Technology choice<a hidden class=anchor aria-hidden=true href=#technology-choice>#</a></h2><p>Building upon existing expertise with AWS infrastructure, DVLA leveraged AWS Step Functions to architect its solution. The decision was reinforced by the robustness and adaptability offered by AWS Step Functions, aligning seamlessly with DVLA‚Äôs cloud-native strategy.</p><h2 id=introducing-the-application-process-engine-aka-ape>Introducing the application process engine aka APE<a hidden class=anchor aria-hidden=true href=#introducing-the-application-process-engine-aka-ape>#</a></h2><p>This is where the application process engine was born, a dynamic workflow engine designed to navigate applications through various stages. APE embodies versatility, executing generic business functionalities common to most applications.</p><figure><img loading=lazy src=images/application-process-engine.png alt="Application process engine"><figcaption><p>Application process engine</p></figcaption></figure><p>The aforementioned diagram offers a birdseye view of the orchestration of the application across its diverse phases. The workflows dedicated to driver applications are compartmentalised and self-contained, executing only the driving licence application-specific steps essential for completing each phase.</p><h2 id=workflow-within-a-workflow->Workflow within a workflow üòï?<a hidden class=anchor aria-hidden=true href=#workflow-within-a-workflow->#</a></h2><p>In our approach to handling the workflow for driving licences and vehicle-related logic, we opted to define sub-workflows for each application phase. For instance, in the scenario where licence holders are mandated to renew their photo on their driving licence, they now have the option to upload a photo of their choice, presenting a unique &ldquo;selfie opportunity.&rdquo; Should they choose this route, a designated clerk within the DVLA is tasked with conducting meticulous checks on the submitted image to ensure compliance with standards.</p><p>However, the preparatory steps involved in photo submission and the subsequent review by a clerk hold no relevance in the context of vehicle applications or instances where individuals seek to update their address information on their driving licence or vehicle - wherein no photo submission is required.</p><figure><img loading=lazy src=images/ape-and-dape.svg alt="10,000m view of the integrated driver application workflows"><figcaption><p>10,000m view of the integrated driver application workflows</p></figcaption></figure><h2 id=harnessing-aws-step-functions-direct-integrations>Harnessing AWS Step Functions direct integrations<a hidden class=anchor aria-hidden=true href=#harnessing-aws-step-functions-direct-integrations>#</a></h2><p>Within the extensive repertoire of direct integrations offered by AWS Step Functions, lies a notable inclusion: AWS Step Functions themselves (yes, start a workflow within a workflow). Leveraging this optimized integration, we seamlessly triggered sub-workflows tailored to the specific phases of driver or vehicle applications directly from our application process engine. This innovative approach draws inspiration from the <a href=https://serverlessland.com/workflows/workflow-within-a-workflow-cdk>ServerlessLand</a> website, underscoring our commitment to efficiency and best practices in workflow architecture.</p><p>AWS simplifies the process of defining steps necessary to trigger sub-workflows. We leverage the <a href=https://www.serverless.com/framework/docs>Serverless Framework</a> for deploying our applications onto AWS which further enhances this seamless integration. Below is an example of how a sub-workflow is triggered:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span><span class=nt>CheckReceptionHook</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Type</span><span class=p>:</span><span class=w> </span><span class=l>Choice</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Choices</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>Variable</span><span class=p>:</span><span class=w> </span><span class=l>$.hooks.receptionStateMachine</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;IsPresent&#34;: </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>Next</span><span class=p>:</span><span class=w> </span><span class=l>ReceptionHook</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Default</span><span class=p>:</span><span class=w> </span><span class=l>SettlePayment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ReceptionHook</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Type</span><span class=p>:</span><span class=w> </span><span class=l>Task</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Resource</span><span class=p>:</span><span class=w> </span><span class=l>arn:aws:states:::states:startExecution.sync:2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Parameters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>StateMachineArn.$</span><span class=p>:</span><span class=w> </span><span class=l>$.hooks.receptionStateMachine.arn</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>Input</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>applicationId.$</span><span class=p>:</span><span class=w> </span><span class=l>$.applicationId</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>iteration.$</span><span class=p>:</span><span class=w> </span><span class=l>$.iteration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>AWS_STEP_FUNCTIONS_STARTED_BY_EXECUTION_ID.$</span><span class=p>:</span><span class=w> </span><span class=l>$$.Execution.Id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>Name.$</span><span class=p>:</span><span class=w> </span><span class=l>States.Format(&#39;{}-{}-{}&#39;, $.hooks.receptionStateMachine.name, $.applicationId, $.iteration)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Retry</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Some retry definitions</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ResultPath</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Next</span><span class=p>:</span><span class=w> </span><span class=l>SettlePayment</span><span class=w>
</span></span></span></code></pre></div><p>Before delving into the defined steps outlined above, it&rsquo;s crucial to discuss certain preparatory steps. At the outset of processing, the application process engine initiates a pivotal step. Here, logic is deployed to ascertain the application type, delineate the required sub-workflows, and furnish the necessary Amazon Resource Names (ARNs) for their execution.</p><p>Within our framework, we employ the term Hooks to denote instances where the application process engine (APE) workflow triggers a sub-workflow. Pertinent hook details are then propagated through the state input and onto the relevant steps.</p><p>While each phase of the application possesses the potential to trigger a sub-workflow, not all applications necessitate every phase. Hence, a preliminary step precedes the hook triggering, deciding whether the state contains details corresponding to the specific phase of the application. As evidenced in the above definition, a step named CheckReceptionHook exemplifies this verification process.</p><p>This orchestration empowers the sub-workflows to seamlessly adapt to the idiosyncratic demands of each application type, while concurrently maintaining the application process engine&rsquo;s versatility and generic behaviour.</p><h3 id=advantages-of-this-approach>Advantages of this approach<a hidden class=anchor aria-hidden=true href=#advantages-of-this-approach>#</a></h3><h4 id=addressing-the-challenge>Addressing the challenge<a hidden class=anchor aria-hidden=true href=#addressing-the-challenge>#</a></h4><p>One of the primary hurdles we encounter revolves around the domain expertise of our teams, particularly concerning drivers or vehicles. This approach empowers driver and vehicle teams to craft their specialised sub-workflows tailored to their applications. These teams seamlessly integrate these sub-workflows into the application process engine, thereby effectively fulfilling the application.</p><h4 id=streamlined-testing>Streamlined testing<a hidden class=anchor aria-hidden=true href=#streamlined-testing>#</a></h4><p>Testing becomes notably simplified with this approach, as clear boundaries are delineated for testing purposes. The application process engine operates as an independent deployment, facilitating comprehensive testing within a controlled environment. Furthermore, the project can undergo testing in isolation. Simple stubs can be readily implemented for the sub-workflows, facilitating smooth progression through various phases. Each individual sub-workflow operates as a self-contained entity, enabling isolated triggering and testing.</p><h4 id=efficient-utilisation-of-common-functionality>Efficient utilisation of common functionality<a hidden class=anchor aria-hidden=true href=#efficient-utilisation-of-common-functionality>#</a></h4><p>Every application inherits the shared functionalities embedded within the application process engine, obviating the need for duplicated steps. This streamlined approach empowers teams to focus their efforts on refining their unique business logic and workflow, thereby enhancing overall efficiency and productivity.</p><h3 id=navigating-challenges-in-implementation>Navigating challenges in implementation<a hidden class=anchor aria-hidden=true href=#navigating-challenges-in-implementation>#</a></h3><h4 id=designing-a-robust-generic-application-process-engine>Designing a robust generic application process engine<a hidden class=anchor aria-hidden=true href=#designing-a-robust-generic-application-process-engine>#</a></h4><p>Despite our analysis of each application type within the DVLA, designing a comprehensive application process engine presents formidable challenges. Anticipating the impact of our design decisions across diverse application types proves inherently complex. To mitigate this challenge, communication and collaboration are paramount. Ensuring that all relevant stakeholders are engaged and have oversight of the changes helps minimise the risk of unintended consequences.</p><h4 id=deploying-to-an-active-production-environment>Deploying to an Active Production Environment<a hidden class=anchor aria-hidden=true href=#deploying-to-an-active-production-environment>#</a></h4><p>Deploying application workflows to a live production environment introduces another layer of complexity. As these workflows actively process applications, any alterations to the underlying sub-workflow state must be executed with utmost caution. Deploying changes while applications are in progress runs the risk of inconsistencies or disruptions in workflow execution. Hence, we attempt to incorporate robust backward compatibility and versioning mechanisms to navigate the evolving landscape effectively.</p><h4 id=end-to-end-testing-dilemmas>End-to-end testing dilemmas<a hidden class=anchor aria-hidden=true href=#end-to-end-testing-dilemmas>#</a></h4><p>While the benefits of testing in isolation are undeniable, they also introduce challenges, particularly in the realm of integration testing. Integrating isolated components developed by different teams necessitates rigorous integration testing to ensure seamless interoperability. Effective communication becomes paramount, especially when teams may naturally prioritise their component&rsquo;s delivery over integration testing. At DVLA, we mitigate this challenge by dedicating a specialised team solely focused on integration testing, ensuring comprehensive validation in a fully integrated environment with an independent view and approach.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>In summary, the DVLA&rsquo;s adoption of AWS Step Functions and the development of the application process engine, represent significant strides towards modernising its application processing. We are thrilled to announce that we have successfully gone live with the ten-year licence renewal process, marking a significant milestone in our digital transformation journey.</p><p>Time will tell whether the design decisions result in an overall improvement in migrating and delivering applications onto the new platform.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://dvla.github.io/tags/aws/>AWS</a></li><li><a href=https://dvla.github.io/tags/aws-step-functions/>AWS Step Functions</a></li></ul><nav class=paginav><a class=prev href=https://dvla.github.io/posts/2024-07-adding-numerous-tags-to-paralleltests-in-cucumber-elegantly/><span class=title>¬´ Prev</span><br><span>TiL: Adding numerous tags to ParallelTests in cucumber elegantly</span></a>
<a class=next href=https://dvla.github.io/posts/2023-12-logging-blocks/><span class=title>Next ¬ª</span><br><span>TiL: Save CPU cycles by logging blocks</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://dvla.github.io/>DVLA Engineering</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>