<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>TiL: The difference between exec and system in Ruby | DVLA Engineering</title><meta name=keywords content="Ruby,exec,system,Today I Learned"><meta name=description content="What exactly are exec and system doing and why do they differ?"><meta name=author content="George Bell"><link rel=canonical href=https://dvla.github.io/posts/2024-09-ruby-exec-vs-system/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://dvla.github.io/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://dvla.github.io/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://dvla.github.io/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://dvla.github.io/favicon/apple-touch-icon.png><link rel=mask-icon href=https://dvla.github.io/favicon/favicon-16x16.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-WH4N9FEEE8"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WH4N9FEEE8",{anonymize_ip:!1})}</script><meta property="og:title" content="TiL: The difference between exec and system in Ruby"><meta property="og:description" content="What exactly are exec and system doing and why do they differ?"><meta property="og:type" content="article"><meta property="og:url" content="https://dvla.github.io/posts/2024-09-ruby-exec-vs-system/"><meta property="og:image" content="https://dvla.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-23T00:00:00+00:00"><meta property="article:modified_time" content="2024-09-23T00:00:00+00:00"><meta property="og:site_name" content="DVLA Engineering"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dvla.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="TiL: The difference between exec and system in Ruby"><meta name=twitter:description content="What exactly are exec and system doing and why do they differ?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://dvla.github.io/posts/"},{"@type":"ListItem","position":2,"name":"TiL: The difference between exec and system in Ruby","item":"https://dvla.github.io/posts/2024-09-ruby-exec-vs-system/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"TiL: The difference between exec and system in Ruby","name":"TiL: The difference between exec and system in Ruby","description":"What exactly are exec and system doing and why do they differ?","keywords":["Ruby","exec","system","Today I Learned"],"articleBody":"Ruby provides a few different ways to execute commands against the underlying kernel programmatically, but they all work slightly differently. The simplest way to execute a command againts the shell is to surround it in backticks. For example, the following will run the command date and return whatever was output to $stdout.\ncurrent_date = `date` However, there are also more explict methods you can call. In particular, there is exec and system which look like they do the same thing at a quick glance. However, they actually work very differently once you get down into what they are doing.\nExec exec works by replacing the process it is called within with the one that is passed into it. This can either be a command to be executed or the path to an executable, but either way the current process will be replaced with what is passed in. This means that when the newly created process exits, it won’t have a ruby application to return to. Take the following code:\nvalue = 123 puts 'Getting the date' exec 'date' puts value * 2 Because exec is called, the final line will not be called and 246 will not be printed out. The last thing to be output will be the current date, as seen below:\nGetting the date Mon Sep 23 10:22:14 BST 2024 System The basic interface with system is very similar. When provided with either a command as a string or the path to an executable, it will be started in a process. The difference is that, rather than replacing the current process, it will instead create a child process. When this process exits it will return back to the ruby process and continue executing, returning true if the command exits with status 0 and false if it exits with a non-zero integer. Let us return to the previous example:\nvalue = 123 puts 'Getting the date' system 'date' puts value * 2 Now that we using system, the final line will execute and our output will look like the following:\nGetting the date Mon Sep 23 10:22:19 BST 2024 246 Much more useful if you need to quickly run a command as part of your code and don’t wish to fully cede control to a different program.\nA word of warning As with anything like this, it is always worth keeping in mind the risk of executing a command aganst the shell directly. No matter which way you are doing it, never execute anything you aren’t confident you understand everything it can do.\n","wordCount":"425","inLanguage":"en","datePublished":"2024-09-23T00:00:00Z","dateModified":"2024-09-23T00:00:00Z","author":{"@type":"Person","name":"George Bell"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dvla.github.io/posts/2024-09-ruby-exec-vs-system/"},"publisher":{"@type":"Organization","name":"DVLA Engineering","logo":{"@type":"ImageObject","url":"https://dvla.github.io/favicon/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://dvla.github.io/ accesskey=h title="DVLA Engineering (Alt + H)"><img src=https://dvla.github.io/favicon/apple-touch-icon.png alt aria-label=logo height=49>DVLA Engineering</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://dvla.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://dvla.github.io/open-source/ title=Open-source><span>Open-source</span></a></li><li><a href=https://github.com/dvla/ title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.civil-service-careers.gov.uk/departments/working-for-the-driver-and-vehicle-licensing-agency/ title=Careers><span>Careers</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://dvla.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://dvla.github.io/posts/>Posts</a></div><h1 class=post-title>TiL: The difference between exec and system in Ruby</h1><div class=post-description>What exactly are exec and system doing and why do they differ?</div><div class=post-meta><span title='2024-09-23 00:00:00 +0000 UTC'>September 23, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;425 words&nbsp;·&nbsp;George Bell</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents></nav></div></details></div><div class=post-content><p>Ruby provides a few different ways to execute commands against the underlying kernel programmatically, but they all work slightly differently. The simplest way to execute a command againts the shell is to surround it in backticks. For example, the following will run the command <code>date</code> and return whatever was output to <code>$stdout</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>current_date</span> <span class=o>=</span> <span class=sb>`date`</span>
</span></span></code></pre></div><p>However, there are also more explict methods you can call. In particular, there is <code>exec</code> and <code>system</code> which look like they do the same thing at a quick glance. However, they actually work very differently once you get down into what they are doing.</p><h1 id=exec>Exec<a hidden class=anchor aria-hidden=true href=#exec>#</a></h1><p><code>exec</code> works by replacing the process it is called within with the one that is passed into it. This can either be a command to be executed or the path to an executable, but either way the current process will be replaced with what is passed in. This means that when the newly created process exits, it won&rsquo;t have a ruby application to return to. Take the following code:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>value</span> <span class=o>=</span> <span class=mi>123</span>
</span></span><span class=line><span class=cl><span class=nb>puts</span> <span class=s1>&#39;Getting the date&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>exec</span> <span class=s1>&#39;date&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>puts</span> <span class=n>value</span> <span class=o>*</span> <span class=mi>2</span>
</span></span></code></pre></div><p>Because <code>exec</code> is called, the final line will not be called and 246 will not be printed out. The last thing to be output will be the current date, as seen below:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>Getting the date
</span></span><span class=line><span class=cl>Mon Sep <span class=m>23</span> 10:22:14 BST <span class=m>2024</span>
</span></span></code></pre></div><h1 id=system>System<a hidden class=anchor aria-hidden=true href=#system>#</a></h1><p>The basic interface with <code>system</code> is very similar. When provided with either a command as a string or the path to an executable, it will be started in a process. The difference is that, rather than replacing the current process, it will instead create a child process. When this process exits it will return back to the ruby process and continue executing, returning <code>true</code> if the command exits with status 0 and <code>false</code> if it exits with a non-zero integer. Let us return to the previous example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>value</span> <span class=o>=</span> <span class=mi>123</span>
</span></span><span class=line><span class=cl><span class=nb>puts</span> <span class=s1>&#39;Getting the date&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>system</span> <span class=s1>&#39;date&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>puts</span> <span class=n>value</span> <span class=o>*</span> <span class=mi>2</span>
</span></span></code></pre></div><p>Now that we using system, the final line will execute and our output will look like the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>Getting the date
</span></span><span class=line><span class=cl>Mon Sep <span class=m>23</span> 10:22:19 BST <span class=m>2024</span>
</span></span><span class=line><span class=cl><span class=m>246</span>
</span></span></code></pre></div><p>Much more useful if you need to quickly run a command as part of your code and don&rsquo;t wish to fully cede control to a different program.</p><h1 id=a-word-of-warning>A word of warning<a hidden class=anchor aria-hidden=true href=#a-word-of-warning>#</a></h1><p>As with anything like this, it is always worth keeping in mind the risk of executing a command aganst the shell directly. No matter which way you are doing it, never execute anything you aren&rsquo;t confident you understand everything it can do.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://dvla.github.io/tags/ruby/>Ruby</a></li><li><a href=https://dvla.github.io/tags/exec/>exec</a></li><li><a href=https://dvla.github.io/tags/system/>system</a></li><li><a href=https://dvla.github.io/tags/today-i-learned/>Today I Learned</a></li></ul><nav class=paginav><a class=next href=https://dvla.github.io/posts/2024-07-ruby-gsub-hashes/><span class=title>Next »</span><br><span>TiL: Doing multiple replacements with gsub in Ruby</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://dvla.github.io/>DVLA Engineering</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>